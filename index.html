
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>油库管理</title>
  <script type="text/javascript" src="./scripts/Cesium/Cesium.js"></script>
  <link rel="stylesheet" href="./layui/css/layui.css">
  
  <script src="./scripts/JavaScrip/CreatePoint.js"></script>
  <script src="./scripts/JavaScrip/CreatePolyline.js"></script>
  <script src="./scripts/JavaScrip/CreatePolygon.js"></script>
  <script src="./scripts/JavaScrip/draw.js"></script>
  
  <script type="text/javascript" src="./scripts/JavaScrip/MeasureLineSpace.js"></script>
  <script type="text/javascript" src="./scripts/JavaScrip/MeasureAreaSpace.js"></script>
  <script type="text/javascript" src="./scripts/JavaScrip/MeasureHeight.js"></script>
    <script type="text/javascript" src="./scripts/JavaScrip/MeasureCircle.js"></script>
  <script type="text/javascript" src="./scripts/JavaScrip/measure.js"></script>
  
</head>
	<body class="layui-layout-body">
		
		<style>
					@import url(./scripts/Cesium/Widgets/widgets.css);
							  html,
							  body,
					
					#cesiumContainer {
						width: 100%;
						height: 100%;
						margin: 0;
						padding: 0;
						overflow: hidden;
					}
					
					/* 地下模式开启关闭按钮 */
					.buttonOn{
						position: absolute;
						left:68px;
						top:11px;
					}
					.swich .box{width:30px;height:17px;background:#ccc;border-radius:15px;transition: all .5s ease;}
					.swich input{display:none;}
					.swich .box span{display:inline-block;height:15px;width:15px;border-radius:40px;background:#ffffff;transform:translate(0px,-6px);transition: all .5s ease;}
					.swich-on .box{background:#245890;transition: all .5s ease;}
					.swich-on .box span{transform:translate(20px,-6px);transition: all .5s ease;}
					
					
					.model_swich .box{width:30px;height:17px;background:#ccc;border-radius:15px;transition: all .5s ease;}
					.model_swich input{display:none;}
					.model_swich .box span{display:inline-block;height:15px;width:15px;border-radius:40px;background:#ffffff;transform:translate(0px,-18.5px);transition: all .5s ease;}
					.model_swich-on .box{background:#245890;transition: all .5s ease;}
					.model_swich-on .box span{transform:translate(20px,-18.5px);transition: all .5s ease;}
					
					
					.modelEditBarRange{width: 100px;margin-left: 6px;margin-top: 10px;}
					.modelEditBarInput{width: 32px;margin-left:5px;}
					.floatingWindow{
						position: absolute;
					}
		</style>
		

	<div class="layui-layout layui-layout-admin">
	  <div class="layui-header">
		 <div class="layui-logo">油库管理系统</div>
		 <ul class="layui-nav layui-layout-left">
			 <li class="layui-nav-item">
			 	<a>视角切换</a>
			 		<dl class="layui-nav-child">
			 			<dd><a onclick="startTheFirstPerson()">第一人称视角</a></dd>
			 			<dd><a onclick="roamPath()">路径漫游功能</a></dd>
			 		</dl>
			 </li>
			<li class="layui-nav-item">
				<a>绘制图像</a>
					<dl class="layui-nav-child">
						<dd><a onclick="drawGeometry(0)">点</a></dd>
						<dd><a onclick="drawGeometry(1)">线</a></dd>
						<dd><a onclick="drawGeometry(2)">面</a></dd>
						<dd><a onclick="drawGeometry(3)">删除</a></dd>
						<dd><a onclick="drawGeometry(4)">清空</a></dd>
					</dl>
			</li>
			
			<li class="layui-nav-item">
				<a>地下模式</a>
				<dl class="layui-nav-child">
					<dd>
						<a>开关</a>
						<div class="swich buttonOn">
							<input type="checkbox">
								<div class="box">
								<span></span>
							</div>
						</div>
					</dd>
					<dd>
						<a >透明度调整</a>
					</dd>
					<dd>
						<input id="myRange" type="range" style="width:85px;margin-left: 13px;" value="100" onmouseup="changeAlpha()">
					</dd>
				</dl>
			</li>
			
			<li class="layui-nav-item">
			  <a>测量</a>
			  <dl class="layui-nav-child">
				 <dd><a onclick = "measureSpace(0)">距离测量</a></dd>
				 <dd><a onclick = "measureSpace(1)">面积测量</a></dd>
				 <dd><a onclick = "measureSpace(5)">圆面积测量</a></dd>
				 <dd><a onclick = "measureSpace(2)">高度测量</a></dd>
				 <dd><a onclick = "measureSpace(3)">删除</a></dd>
				 <dd><a onclick = "measureSpace(4)">清空</a></dd>
			  </dl>
			</li>
			
			
			<li class="layui-nav-item">
			  <a>定位</a>
			  <dl class="layui-nav-child">
				 <dd><a>经度</a><input id = "myLon" type="input" value ="0" style = "width:70px"></dd>
				 <dd><a>纬度</a><input id = "myLat" type="input" value ="0" style = "width:70px"></dd>
				 <dd><a onclick="fly2Mylonlat()">定位</a></dd>
			  </dl>
			</li>
			
			<li class="layui-nav-item">
				<a>模型编辑模式</a>
				<div  class="model_swich buttonOn" style="margin-top:12px;margin-left:60px;">
					<input type="checkbox" >
						<div class="box">
						<span></span>
					</div>
				</div>
				</li>
		   </ul>
		 		
		 <ul class="layui-nav layui-layout-right">
<!-- 			<li class="layui-nav-item">
			  <a>
				 <img src="./layui/images/logo.jpg" class="layui-nav-img">
				 管理员
			  </a>
			  <dl class="layui-nav-child">
				 <dd><a>基本资料</a></dd>
				 <dd><a>安全设置</a></dd>
			  </dl>
			</li> -->
			<li class="layui-nav-item" >
				<a onclick="saveToFile()">
					<img src="./layui/images/screenshot.png" class="layui-nav-img">场景出图
				</a>
			</li>
		 </ul>
	  </div>
	  <!-- <div class="layui-side layui-bg-black"> -->
	<div class="layui-side" style="width:220px;margin-top: -1000px;" id="ModelEdit">
		 <div class="layui-side-scroll">
			<ul class="layui-nav layui-nav-tree"  lay-filter="test" style="width:220px;">
				<li class="layui-nav-item">
					<a>模型编辑</a>
						<dl class="layui-nav-child ">
							<div id = "ModelEditBar">
							<table>
								<tr>
									<td>&nbsp;&nbsp;比例</td>
									<td>
										<input type="range" min="1.0" max="100.0" step="1.0" value ="1" class="modelEditBarRange" data-bind="value: scale, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="1.0" max="100.0" step="1.0" value ="1" class="modelEditBarInput" data-bind="value: scale" />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;Heading</td>
									<td>
										<input type="range" min="0.0" max="360.0" step="1.0" value ="0" class="modelEditBarRange" data-bind="value: heading, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="0.0" max="360.0" step="1.0" value ="0" class="modelEditBarInput" data-bind="value: heading" />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;Pitch</td>
									<td>
										<input type="range" min="0" max="360" step="1.0" value ="0" class="modelEditBarRange" data-bind="value: pitch, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="0" max="360" step="1.0" value ="0" class="modelEditBarInput" data-bind="value: pitch"  />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;Roll</td>
									<td>
										<input type="range" min="0" max="360" step="1.0" value ="0" class="modelEditBarRange" data-bind="value: roll, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="0" max="360" step="1.0" value ="0" class="modelEditBarInput" data-bind="value: roll"  />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;透明度</td>
									<td>
										<input type="range" min="0.1" max="1" step="0.1" value ="1" class="modelEditBarRange" data-bind="value: alpha, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="0.1" max="1" step="0.1" value ="1" class="modelEditBarInput" data-bind="value: alpha"  />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;X轴平移</td>
									<td>
										<input type="range" min="-1" max="1" step="0.01" value ="0" class="modelEditBarRange" data-bind="value: tranX, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="-1" max="1" step="0.01" value ="0" class="modelEditBarInput" data-bind="value: tranX"  />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;Y轴平移</td>
									<td>
										<input type="range" min="-1" max="1" step="0.01" value ="0" class="modelEditBarRange" data-bind="value: tranY, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="-1" max="1" step="0.01" value ="0" class="modelEditBarInput" data-bind="value: tranY"  />
									</td>
								</tr>
								
								<tr>
									<td>&nbsp;&nbsp;Z轴平移</td>
									<td>
										<input type="range" min="-300" max="300" step="1" value ="0" class="modelEditBarRange" data-bind="value: tranZ, valueUpdate: 'input'" />
									</td>
									<td>
										<input type="input" min="-300" max="300" step="1" value ="0" class="modelEditBarInput" data-bind="value: tranZ" />
									</td>
								</tr>
							</table>
							</div>
				</dl>
				<li class="layui-nav-item">
				    <a>模型添加</a>
				    <dl class="layui-nav-child">
				      <dd><a onclick="addExistingModel(0)"><img src="./layui/images/logo.jpg" class="layui-nav-img">油库模型一</a></dd>
				      <dd><a onclick="addExistingModel(1)"><img src="./layui/images/logo2.png" class="layui-nav-img">油库模型二</a></dd>
				      <dd><a onclick="addExistingModel(2)"><img src="./layui/images/logo3.png" class="layui-nav-img">油库模型三</a></dd>
				    </dl>
				  </li>
				  
			  <li class="layui-nav-item">
					<dd><a onclick="clearOneModel()">删除</a></dd>
			  </li>
				  
			 </li>
			</ul>
		 </div>
	  </div>
<!-- 	  </div> -->
	  <div class="layui-body">
		 <div id="cesiumContainer" class="fullsize"></div>
		 <script src="./scripts/JavaScrip/CesiumMenu.js">
		 </script>
	  </div>
	</div>

		<script src="./layui/layui.js"></script>
		<script>
			
			layui.use('layer', function(){
			  var layer = layui.layer;
			layer.open({
				title: '操作提示',
			  content: '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;鼠标左键为选择操作,右键为取消该操作。<p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;选择操作与取消操作一一对应。</p>',
			  yes: function(index, layero){
			    layer.close(index); 
			  }
			});        
			});              
			
			//JavaScript代码区域
			layui.use('element', function(){
			  var element = layui.element;
			});

			(function(select){
					  var box = document.querySelector(select)
					  var checkbox = box.querySelector("input");
					  box.onclick = function(){
							this.classList.toggle("swich-on");
							if(checkbox.checked){
								 changeMode();
								 checkbox.checked = "true";
							}else{
								 changeMode();
								 checkbox.checked = "false";
							}
					  }
				 })(".swich");
					 
			 (function(select){
				  var box = document.querySelector(select)
				  var checkbox = box.querySelector("input");
				  box.onclick = function(){
						this.classList.toggle("model_swich-on");
						if(checkbox.checked){
							 editModel();
							 fun1();
							 checkbox.checked = "true";
						}else{
							 editModel();
							 fun1();
							 checkbox.checked = "false";
						}
				  }
			 })(".model_swich");

			  var timer;
			  function fun1() {
				 clearInterval(timer);
				var odiv = document.getElementById("ModelEdit");
				 if (odiv.style.marginTop =="-1000px") {
					timer = setInterval(function () {
					  odiv = document.getElementById("ModelEdit");
					  odiv.style.marginTop = 0+"px";
					}, 10)
				 }
				 
				 if (odiv.style.marginTop =="0px") {
					timer = setInterval(function () {
					  odiv = document.getElementById("ModelEdit");
					  odiv.style.marginTop  = -1000+"px";
					}, 10)
				 }
			  }	 
		</script>
	</body>
</html>